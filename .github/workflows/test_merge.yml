# testing merge on the main branch
name: ptest to main


on: 
  push:
    branches: [ ptest ]
    
permissions: write-all

jobs:
  merge-ptest-to-main:
    runs-on: ubuntu-latest
    
    steps:
      - name: checkout repo
        uses: actions/checkout@v3 # checkout the repository content

      - name: Set git config
        run: |
          git config --local user.email "actions@github.com"
          git config --local user.name "Github Actions"
      
      - name: Merge to main
        run: |
          git fetch --unshallow
          git checkout main
          git pull
          git merge --no-ff ptest -m "Auto-merge ptest back to main"
          git push
